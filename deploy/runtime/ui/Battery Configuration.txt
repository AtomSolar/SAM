Battery Configuration
1000
357
15
GroupBox

1
7
Name
5
27
Additional equipment losses
X
3
9
Y
3
144
Width
3
985
Height
3
209
Caption
5
26
Ancillary Equipment Losses
Bold
2
1
GroupBox

1
7
Name
5
21
Battery Configuration
X
3
9
Y
3
3
Width
3
985
Height
3
140
Caption
5
16
Power Converters
Bold
2
1
Divider

1
9
Name
5
10
Loss label
X
3
78
Y
3
225
Width
3
306
Height
3
16
Orientation
3
0
Colour
4
120
120
120
255
Caption
5
10
Loss input
Bold
2
1
Numeric

1
16
Name
5
21
batt_ac_dc_efficiency
X
3
597
Y
3
84
Width
3
90
Height
3
24
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
RadioChoice

1
10
Name
5
13
batt_ac_or_dc
X
3
90
Y
3
54
Width
3
678
Height
3
27
Selection
3
0
Items
6
2
DC Connected
AC Connected
ShowCaptions
2
1
Horizontal
2
1
TabOrder
3
4294967295
Numeric

1
16
Name
5
21
batt_dc_ac_efficiency
X
3
597
Y
3
108
Width
3
90
Height
3
24
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
Numeric

1
16
Name
5
21
batt_dc_dc_efficiency
X
3
258
Y
3
84
Width
3
90
Height
3
24
Value
1
0
Mode
3
1
Format
3
1
Decimals
3
3
Prefix
5
0
Suffix
5
0
ThousandsSep
2
1
Editable
2
1
ForeColour
4
0
0
0
255
BackColour
4
255
255
255
255
TabOrder
3
4294967295
RadioChoice

1
10
Name
5
16
batt_loss_choice
X
3
102
Y
3
243
Width
3
582
Height
3
33
Selection
3
0
Items
6
2
Enter average loss by operating mode
Enter time series
ShowCaptions
2
1
Horizontal
2
1
TabOrder
3
4294967295
DataArray

1
9
Name
5
11
batt_losses
X
3
390
Y
3
279
Width
3
90
Height
3
24
Mode
3
1
Label
5
21
Battery system losses
Description
5
63
Battery system losses are power losses that apply system output
TabOrder
3
4294967295
MonthlyFactor

1
7
Name
5
20
batt_losses_charging
X
3
192
Y
3
276
Width
3
90
Height
3
24
Description
5
17
Single or monthly
TabOrder
3
4294967295
MonthlyFactor

1
7
Name
5
23
batt_losses_discharging
X
3
192
Y
3
300
Width
3
90
Height
3
24
Description
5
17
Single or monthly
TabOrder
3
4294967295
MonthlyFactor

1
7
Name
5
16
batt_losses_idle
X
3
192
Y
3
324
Width
3
90
Height
3
24
Description
5
17
Single or monthly
TabOrder
3
4294967295
Label

1
12
Name
5
8
object 7
X
3
27
Y
3
168
Width
3
945
Height
3
63
Caption
5
303
Specify additional hourly losses not captured by power conversion losses.  Such losses might include pumps, heaters, or other equipment required by the battery system.  For AC-connected batteries, the losses are applied on the AC side.  For DC-connected batteries, the losses are applied on the DC side.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
10
object 710
X
3
30
Y
3
30
Width
3
942
Height
3
24
Caption
5
105
Choose whether the battery is connected on the DC side of the PV array, or post inversion on the AC side.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1
Label

1
12
Name
5
9
object 77
X
3
630
Y
3
288
Width
3
336
Height
3
42
Caption
5
83
Operation losses will be applied whenenver the battery is at that operational mode.
TextColour
4
0
0
0
255
Bold
2
0
FontSize
3
0
WordWrap
2
1
AlignRight
2
0
AlignTop
2
1

9
batt_ac_dc_efficiency
3
1
AC to DC conversion efficiency
%
Battery
0
2
1
1
1
1
99
Numeric
batt_ac_or_dc
3
1
 
 
Battery
0
2
1
1
1
1
1
RadioChoice
batt_dc_ac_efficiency
3
1
DC to AC conversion efficiency
%
Battery
0
2
1
1
1
1
99
Numeric
batt_dc_dc_efficiency
3
1
DC to DC conversion efficiency
%
Battery
0
2
1
1
1
1
99
Numeric
batt_loss_choice
3
1
Choose to input single, monthly, or time-series losses
kW
Battery
0
1
1
1
1
1
0
RadioChoice
batt_losses
3
2
Time series
kW
Battery
0
0
1
2
1
1
0
DataArray
batt_losses_charging
3
2
Charging mode
kW
Battery
0
2
1
2
1
1
0
MonthlyFactor
batt_losses_discharging
3
2
Discharging mode
kW
Battery
0
0
1
2
1
1
0
MonthlyFactor
batt_losses_idle
3
2
Idle mode
kW
Battery
0
0
1
2
1
1
0
MonthlyFactor

0
718
on_load{'Battery Configuration'} = define()
{
	check_configuration();
	toggle_losses();
	on_change{'batt_ac_or_dc'};
};
on_change{'batt_ac_or_dc'} = define()
{ 
	check_configuration();
};
on_change{'batt_loss_choice'} = define()
{
	toggle_losses();
};
function check_configuration()
{
	isdc = value('batt_ac_or_dc') == 0;
	enable('batt_dc_dc_efficiency', isdc);
	enable('batt_ac_dc_efficiency', !isdc);
	enable('batt_dc_ac_efficiency', !isdc);
}

function toggle_losses()
{
	mode = ${batt_loss_choice};
	monthly = true;
	if (mode == 1)
		monthly = false;

	enable('batt_losses_charging', monthly);
	enable('batt_losses_discharging', monthly);
	enable('batt_losses_idle', monthly);
	enable('batt_losses', !monthly);
}

